## 返回目录：

类图描述**系统静态结构**。

在系统的逻辑视图中，类图用于表示类和它们之间的关系。我们利用类图来说明实体共同的角色和责任，这些实体提供了系统的行为。

类图中的两个基本元素是**类**和它们的**基本关系**。

## 一、类表示法

类图标由**三个部分**组成：第一个部分是**类名**，第二个部分是**属性**，第三个部分是**操作**。

![](https://pic2.zhimg.com/v2-dbdfdf841585343b24c868c6c1a0cde1_b.jpg)

![](https://pic4.zhimg.com/v2-f128916d2c4983906034df164d60cbc7_b.jpg)

**类名**在它的命名空间中唯一。类名以**大写字母开头**，省略多个单词之间的空格。

**属性和操作**在类的范围内必须无二义。属性和操作是**以小写字母开头**，**后续单词的首字母大写**，且同样省略空格。

**抽象类**和**抽象操作**用**斜体**表示。

*   **属性**规格说明格式：

可见性 属性名称：类型 [多重性] = 默认值 {特性字符串}

*   **操作**规格说明格式：

可见性 操作名称（参数名称：类型）：返回值 {特性字符串}

## 二、可见性

*   **公有**可见性（+）：对能看到这个类的任何元素都可见。
*   **保护**可见性（#）：对这个类及其子类的其他元素可见。
*   **私有**可见性（-）：对这个类的其他元素可见。
*   **包**可见性（~）：对同一个包中的其他元素可见。

![](https://pic2.zhimg.com/v2-4c019342acf634573c9e5703e89c126d_b.jpg)

## 三、类关系

类的基本联系包括**关联、泛化、聚合和组合**。

### 1. 关联

关联用**不带箭头的实线**表示。

![](https://pic1.zhimg.com/v2-f1f131e2d30b266fcbf2018852d89188_b.jpg)

关联连接了两个类，体现了一种**语义关系**。

关联通常用**名词词组**来标注，如下图中的 Analyzes，以说明关系的实质。

类可能与它自己有关联（称为**自关联**），如 PlanAnalyst 类的实例之间的协作。注意，这里同时使用了**关联端名称**和**关联名称**，目的是提供清晰性。

![](https://pic2.zhimg.com/v2-b652cf2a2091cdbe7b7ee55cf7091ebd_b.jpg)

关联可以进一步通过**多重性**来修饰（没有也可以）。多重性的语法如下：

*   精确到 1 个。
*   数目不限（0 个或多个）。
*   0..*：0 个或多个。
*   1..*：1 个多多个。
*   0..1：0 个或 1 个。
*   3..7：指定范围（3~7 个，包含 3 和 7）

多重性应用于关联的目标端，说明**源类的每个实例与目标类实例的连接个数**。除非显式说明，否则关系的多重性就是未指定的。

### 高级概念：关联的方向性。

在分析时，我们认为关联是分析类之间的双向逻辑连接。在设计时，我们将关注的焦点转到关联的导航性上。

从 GrainCrop 类到 GrainYieldPredictor 类的单向关联通常意味着 GrainCrop 类的某些方法在实现时使用了 GrainYieldPredictor 类的服务。注意，GrainCrop 类和 GrainYieldPredictor 类之间的关联端名称的可见性，GrainCrop 对 GrainYieldPredictor 类似私有的。

![](https://pic4.zhimg.com/v2-95df6ad7e3b9c48d844481bc94e04c1f_b.jpg)

### 2. 泛化

泛化描述的 “**是一种**” 的关系。

泛化用**带有封闭箭头的实线**表示。**箭头指向超类，关联的另一端是子类**。

子类继承超类的结构和行为。根据这些规则，一个类可以有一个（单继承）或多个（多继承）超类，超类间的名字冲突也可以根据所选语言的规则来处理。

泛化关系**不能有多重性指定**。

下图中的 GrowingPlan 类是超类，它的子类是 FruitGrowingPlan。

![](https://pic2.zhimg.com/v2-a985de80b99289ce5be7900de5756609_b.jpg)

### 3. 聚合

聚合表明一种**整体 - 部分**的层次结构。

聚合用**带有一个空心菱形的实线**表示。**菱形所在的一端是聚合体（整体），另一端的类代表它的实例构成了聚合对象的部分**。

自聚合和循环聚合关系是可能的。这种整体 - 部分的层次关系**并不意味着物理上的包容**：一个专业协会有一些成员，但不表示协会拥有它的成员。就如汽车和轮胎，当汽车销毁的时候，并不意味着轮胎也销毁了。即**两个对象的生命周期是相互独立的**。

聚合关系末端的 *（0 个或多个）**多重性**进一步突出了这不是物理包容关系。

下图中，EnvironmentalController 类有 Light、Heater 和 Cooler 类作为它的部分。

![](https://pic4.zhimg.com/v2-fffaa07e4de95272e845bf6f0e74d453_r.jpg)

### 4. 组合

组合则是关联更强的聚合。**部分与整体共存亡**，是物理包容。

组合用**带有一个实心菱形的实线**表示。**菱形所在的一端是整体，另外一端是部分**。

**整体**所在的一端的**多重性是 1**，因为根据定义，**部分在整体之外就没有任何意义，整体拥有部分，部分的生命周期与整体式一样的**。

![](https://pic2.zhimg.com/v2-34b19daa7e08117e37b41ca1217e4c79_r.jpg)

## 四、其他关系或符号

### 1. 接口

接口是未给出实现的对象行为的描述，接口包含操作，但没有属性，一个或多个类可以实现接口，每个类实现接口的操作。

![](https://pic2.zhimg.com/v2-b60963c90ee5ddbb4dafedade48cdd49_b.jpg)

### 2. 注释

![](https://pic1.zhimg.com/v2-2d4f6ce199434a5098a44b55cdb39310_b.jpg)

### 3. 依赖

依赖指明两个或两个以上模型元素之间的关系。

依赖有很多种类，比如：实现（realize）、使用（usage）、实例化（instantiate）、调用（call），派生（derive）、访问（access）、引入（import）、友元（friend）等等。

![](https://pic2.zhimg.com/v2-30d2b3eadfbd840f1950db4b19af98cd_b.jpg)

### 4. 实现

实现是依赖的一种，但由于它具有特殊意义，所以将它独立讲述。

实现是连接说明和实现之间的关系。

![](https://pic2.zhimg.com/v2-6b8a2790872d0ef84795242da0297ce9_r.jpg)

### 5. 约束

约束用来表示各种限制，如关联路径上的限制，和属性特征检测（存在、所有）。

![](https://pic3.zhimg.com/v2-8081f487efb254a35d69fdfa9547c6f6_b.jpg)

## 例题：商场购物卡

*   若某商场中发行一种**购物卡**，**用户**可以根据自己的需要提出**申请去办理购物卡**。
*   商场的**卡管理员**可以根据申请，**创建新的购物卡**。
*   **用户**可以向购物卡**预存费用**，商场**卡管理员**为该用户**添加**相应的**预存费用**。
*   **用户**可以用购物卡在商场进行**消费**，每进行一次消费，**售货员**就从购物卡中**扣除**相应的**费用**。
*   当购物消费每满一定数额时，**商场**自动在卡中**添加奖励费**。

## 分析：

*   **购物卡**是一个类。
*   直接对购物卡类进行操作的有**商场卡管理员类**和**售货员类**，商场卡管理员和售货员都是用户，他们继承**用户类**的特性。
*   商场卡管理员可以添加预存费用，形成一个**加款记录类**。
*   售货员可以从卡中扣除费用，形成一个**消费记录类**。
*   当消费每满一定数额时，商场会在卡中添加奖励费，形成一个**奖励记录类**。

![](https://pic2.zhimg.com/v2-80fe5349740eacf84805c92812831a91_r.jpg)