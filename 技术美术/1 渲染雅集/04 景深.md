
# 4.5 DOF 景深
先理解下概念。。
## 一、什么是景深

维基百科是这样描述的：
景深 (Depth of fielf, DOF) 景深是指相机对焦点前后相对清晰的成像范围。在光学中，尤其是录影或是摄影，是一个描述在空间中，可以清楚成像的距离范围。虽然透镜只能够将光聚在某一固定的距离，远离此点则会逐渐模糊，但是在某一段特定的距离内，图像模糊的程度是肉眼无法察觉的，这段距离称之为景深。当焦点设在超焦距处时，景深会从超焦距的一半延伸到无限远，对一个固定的光圈值来说，这是最大的景深。

下图是景深的示例：
![[Pasted image 20221209172919.png]]
可以看到上图中间的蝴蝶部分是清晰的，而其它都是模糊的。

那么为什么画面中特定的部分是清晰的，而另一些则是模糊到几乎无法辨认？

有一个概念叫离散圈，能够帮助我们理解为什么照片的特定部分是清晰的，而其它部分是模糊的，离散圈是指在准确对焦的时候，场景中的一个点会被完美还原出来，就是指下图的合焦状态，而在对焦错误的情况下，这个点会在画面中形成一个错误的圆形。

![[Pasted image 20221209173022.png]]
### 二、景深的作用

景深的作用：

选择性的突出或者强调画面中的一部分，例如某个物体或者某个人物，吸引观察者的注意力到画面中清晰对焦的部分，而忽略其它的模糊部分的细节。

强调所拍摄场景的深度，增加画面的层次立体感。

艺术意境的表达。摄影师可以利用景深效果，营造处虚幻、梦境、或者神奇等意境。

表示主观的视线。在电影学中，通过调节浅景深的镜头，使之对焦在不同的位置上，来表示某个人的主管视线的转移。

交代人物的关系。在电影学中，通过景深聚焦位置的变化，来表达前景和背景人物之间的关系。

下面是景深的视频示例：
![[Pasted image 20221209173338.png]]
### 三、移动端景深效果实现

**景深的效果是在后处理阶段完成的**：
![[Pasted image 20221209173418.png]]
它的制作思路这样的，先制作景深 mask，然后对场景进行模糊，之后再和正常场景插值合并。
![[Pasted image 20221209173440.png]]
四、高级景深效果思路拓展

景深渲染中出现的三种情况的示意图以及相对应的滤波核。下面 a 图中 p 点在背景区域，b 图中 p 点在前景区域，c 图中 p 点在聚焦区域。
![[Pasted image 20221209173449.png]]
