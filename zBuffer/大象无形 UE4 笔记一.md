## 前言

《大象无形：虚幻引擎程序设计浅析》这本书我已经买了两年多了。当初刚入门 UE4 的时候，读得不是很懂。如今准备再次阅读，然后做一些笔记，分享出来。

首先为什么这本书被命名为大象无形这个名字，因为 UE4 引擎非常复杂，代码超过五百万行，不过这么复杂的程序并不会影响我们的使用，所以印证了《道德经》里面的： 大器晚成，大音希声，大象无形。

![](https://pic3.zhimg.com/v2-8d5564798ec41e804d6cee727ec4023e_r.jpg)

## 常见基类

我们先来学习一下 UE4 的 5 个常见基类：

![](https://pic4.zhimg.com/v2-b2683c9cb3ebcb5fa9de3c72bd730d1f_r.jpg)

### UObject 的功能

首先我们来看看 UObject。它是 UE4 大部分类的基类。它提供了如下几种功能：

![](https://pic3.zhimg.com/v2-c665190b766bef4f7c7413fba8826eda_r.jpg)

**一，垃圾收集**

继承自 UObject 类的类对象，都会加入到 UE4 的垃圾收集系统，在没有其他地方引用时候，定期清理，释放内存。

**二，反射**

运行时能获取一个类，动态创建类的对象，并且能动态获取到类有哪些函数和成员变量等，UE4 的蓝图中大量使用了反射技术。

**三，序列化**

能把一个类的对象保存到磁盘，并且在下次运行时无损加载它。

**四，与编辑器的交互**

UE4 编辑器能操作类的变量，设置属性等。

**五，运行时类型识别**

继承自 UObject，能使用 Cast<> 来进行运行时类型识别

**六，网络复制**

UE4 包括一套服务器 / 客户端架构，能自动完成 UObject 的属性网络复制的功能。

### Actor 类

Actor 的字面意思是演员。

![](https://pic4.zhimg.com/v2-4882304c3db41254d53c9627f2dee387_b.jpg)

在 UE4 中 Actor 拥有这样的能力：**它能够被挂载组件**。

![](https://pic2.zhimg.com/v2-2c94808138261381ab31e3006c9e818d_r.jpg)

如上，如果需要它被渲染，可以挂一个 静态模型组件，或者骨骼模型组件，如果需要它移动，可以挂一个移动组件。

### Pawn 类

在国际象棋中，pawn 代表的是：

![](https://pic1.zhimg.com/v2-de8074d75368a818346f1762530a38e8_b.jpg)

也就是说，它提供了被 “操作” 的特性。它能被后面要提到的 “Controller” 所操纵。

### Character 类

它继承自 Pawn，提供了一个特殊组件：Character Movement。这个组件提供了一个基础的，基于胶囊体的角色移动功能。包括移动和跳跃，还能扩展出蹲伏和爬行等。所以如果你的游戏角色是人类的话，特别适合使用 Character 类。

![](https://pic4.zhimg.com/v2-91859d28126cef4388f52640aabfb357_r.jpg)

### Controller 类

Controller 是用来操控 Pawn/Character 的人。 可以把它看作是下棋的棋手，或者提线木偶的操作者。

![](https://pic3.zhimg.com/v2-8ef5ab3c9a4a63de62a350630748e922_b.jpg)

它既可以是玩家，比如 Player Controller，通过键盘或者手柄输入来操作游戏角色，也可以是电脑 AI，比如 AI Controller 来操作游戏中的 NPC 和怪物等角色。

它通过 Possess 来接管并控制一个角色，然后通过 UnPossess 来结束接管一个角色。

![](https://pic4.zhimg.com/v2-f87fea435aca4b027e04cf6e55ab131f_r.jpg)

至此，第一节的笔记就分享完成了。后面应该会直接讲模块机制，或者 对象模型相关。敬请期待！