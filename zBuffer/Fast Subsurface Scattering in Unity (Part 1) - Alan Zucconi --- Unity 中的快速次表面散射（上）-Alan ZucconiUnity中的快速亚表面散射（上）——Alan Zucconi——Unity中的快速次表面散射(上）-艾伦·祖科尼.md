é«˜è´¨é‡çš„æ¬¡è¡¨é¢æ•£å°„ä½¿ç”¨å…‰çº¿è¿½è¸ªæ¥å®ç°ï¼Œå¯¹äºå®æ—¶æ¸²æŸ“æ¥è¯´è®¡ç®—æˆæœ¬å¤ªé«˜ã€‚å¤§å¤šæ•°ç°ä»£å¼•æ“ä¾èµ–äºå¤§è§„æ¨¡çš„ç®€åŒ–ï¼Œå°½ç®¡æ— æ³•å†ç°çœŸå®æ„Ÿï¼Œä½†å¯ä»¥äº§ç”Ÿå¯ä¿¡çš„è¿‘ä¼¼å€¼ã€‚**æœ¬æ•™ç¨‹ä»‹ç»äº†ä¸€ç§å¿«é€Ÿã€å»‰ä»·ä¸”ä»¤äººä¿¡æœçš„è§£å†³æ–¹æ¡ˆï¼Œå¯ç”¨äºæ¨¡æ‹Ÿè¡¨ç°å‡ºæ¬¡è¡¨é¢æ•£å°„çš„åŠé€æ˜ææ–™ã€‚**

åŸºäº Alpha Blend å®ç°çš„**é€æ˜ï¼ˆTransparentï¼‰æè´¨**å…‰çº¿æ˜¯æ²¡æœ‰æ•£å°„çš„ï¼ˆä¸‹å›¾å·¦ï¼‰ï¼Œåªå½±å“é€šè¿‡çš„å…‰é‡ã€‚çœŸå®çš„**åŠé€æ˜ï¼ˆTranslucentï¼‰æè´¨**ä¼šå‘ç”Ÿæ•£å°„ï¼Œæ”¹å˜å…‰çº¿çš„è·¯å¾„ã€‚ï¼ˆä¸‹å›¾å³ï¼‰
![[Pasted image 20230723142312.png]]

æ¬¡è¡¨é¢æ•£å°„ï¼šå½“å…‰ç…§å°„åˆ°åŠé€æ˜ææ–™çš„è¡¨é¢æ—¶ï¼Œä¸€éƒ¨åˆ†åœ¨å†…éƒ¨ä¼ æ’­ï¼Œåœ¨åˆ†å­ä¹‹é—´åå¼¹ï¼Œç›´åˆ°æ‰¾åˆ°å‡ºè·¯ã€‚è¿™é€šå¸¸ä¼šå¯¼è‡´åœ¨ç‰¹å®šç‚¹è¢«å¸æ”¶çš„å…‰åœ¨å…¶ä»–åœ°æ–¹å†æ¬¡å°„å‡ºã€‚
æ¬¡è¡¨é¢æ•£å°„ä¼šäº§ç”Ÿæ¼«å°„è¾‰å…‰ï¼Œè¿™ç§è¾‰å…‰å¯ä»¥åœ¨çš®è‚¤ã€å¤§ç†çŸ³å’Œç‰›å¥¶ç­‰æè´¨ä¸­çœ‹åˆ°ã€‚
<iframe width="700" height="394" src="https://www.youtube.com/embed/1K9kQi9UZM0" title="Stanford dragon subsurface scattering test with Blender" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

åŠé€æ˜æ˜‚è´µçš„åŸå› ï¼š
1. å®ƒéœ€è¦æ¨¡æ‹Ÿå…‰çº¿åœ¨ææ–™å†…éƒ¨çš„æ•£å°„ã€‚æ¯æ¡å…‰çº¿å¯ä»¥åˆ†æˆå¤šæ¡ï¼Œåœ¨ä¸€ç§ææ–™å†…åå°„æ•°ç™¾ç”šè‡³æ•°åƒæ¬¡ã€‚
2. åœ¨ä¸€ä¸ªç‚¹ä¸Šæ¥æ”¶åˆ°çš„å…‰åœ¨å…¶ä»–åœ°æ–¹é‡æ–°å‘å°„ã€‚è¿™æ˜¯ä¸å®¹æ˜“çš„ã€‚åœ¨å®æ—¶æ¸²æŸ“é¢†åŸŸï¼ŒGPU å¸Œæœ›ç€è‰²å™¨èƒ½å¤Ÿç®€å•åœ°ä½¿ç”¨å±€éƒ¨å±æ€§æ¥è®¡ç®—æè´¨çš„æœ€ç»ˆé¢œè‰²ã€‚æ¯ä¸ªé¡¶ç‚¹å¯ä»¥è¯»å–è‡ªå·±çš„å±æ€§ï¼Œä½†ä¸èƒ½è¯»å–ä¸´è¿‘é¡¶ç‚¹çš„ã€‚å¤§å¤šæ•°å®æ—¶è§£å†³æ–¹æ¡ˆå¿…é¡»ç»•è¿‡è¿™äº›é™åˆ¶ï¼Œå¹¶æ‰¾åˆ°ä¸€ç§åœ¨ä¸ä¾èµ–éå±€éƒ¨ä¿¡æ¯çš„æƒ…å†µä¸‹ä¼ªé€ å…‰åœ¨ææ–™å†…ä¼ æ’­çš„æ–¹æ³•ã€‚

æœ¬æ•™ç¨‹ä¸­æè¿°çš„æ–¹æ³•åŸºäº Colin BarrÃ©-Brisebois å’Œ Marc Bouchard åœ¨ 2011 å¹´ GDC å‘è¡¨çš„ [Approximating Translucency for a Fast, Cheap and Convincing Subsurface Scattering Look](https://colinbarrebrisebois.com/2011/03/07/gdc-2011-approximating-translucency-for-a-fast-cheap-and-convincing-subsurface-scattering-look/) ç”¨äº DICE çš„ã€Šæˆ˜åœ° 3ã€‹å¯’éœœ 2 å¼•æ“

# åŸç†

The idea behind their solution is very simple. In opaque materials, the light contribution comes directly from the light source. Vertices that are inclined more than 90 degrees in respects to the direction of the light,

![[3e10ca3f0fa97a107f57c751bd63093b_MD5.svg]]

, receive no light (bottom, left). According to the model proposed in the presentation, translucent materials have an additional light contribution which is related to

![[de6b0f7e4174ac10effa6705cd6fac87_MD5.svg]]

. Geometrically,

![[de6b0f7e4174ac10effa6705cd6fac87_MD5.svg]]

can be seen as if some of the light actually passed through the material and made it to the other side (bottom, right).  
è¯¥æ–¹æ¡ˆéå¸¸ç®€å•ã€‚åœ¨ä¸é€æ˜æè´¨ä¸­ï¼Œå…‰çš„è´¡çŒ®ç›´æ¥æ¥è‡ªå…‰æºã€‚ç›¸å¯¹äºç¯å…‰ ![[3e10ca3f0fa97a107f57c751bd63093b_MD5.svg]] çš„æ–¹å‘å€¾æ–œè¶…è¿‡90åº¦çš„é¡¶ç‚¹ä¸æ¥æ”¶ç¯å…‰ï¼ˆåº•éƒ¨ï¼Œå·¦ä¾§ï¼‰ã€‚æ ¹æ®æ¼”ç¤ºä¸­æå‡ºçš„æ¨¡å‹ï¼ŒåŠé€æ˜ææ–™å…·æœ‰ä¸ ![[de6b0f7e4174ac10effa6705cd6fac87_MD5.svg]] ç›¸å…³çš„é¢å¤–å…‰è´¡çŒ®ã€‚ä»å‡ ä½•è§’åº¦æ¥çœ‹ï¼Œ #2å¯ä»¥è¢«è§†ä¸ºä¸€äº›å…‰å®é™…ä¸Šç©¿è¿‡äº†ææ–™å¹¶åˆ°è¾¾äº†å¦ä¸€ä¾§ ï¼ˆåº•éƒ¨ï¼Œå³ä¾§ï¼‰ã€‚

![[f2ea9f985f9f15a64bac2cfeadd2ceef_MD5.png]]

Each light now accounts for two, distinct reflectances contributions: the front and back illuminations. Since we want our materials to be as realistic as possible, we will use Unityâ€™s Standard PBR lighting models for the front illumination.  
ç°åœ¨ï¼Œæ¯ç§å…‰éƒ½æœ‰ä¸¤ç§ä¸åŒçš„åå°„ç‡ï¼šå‰ç…§æ˜å’Œåç…§æ˜ã€‚ç”±äºæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ææ–™å°½å¯èƒ½é€¼çœŸï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Unityçš„æ ‡å‡†PBRç…§æ˜æ¨¡å‹è¿›è¡Œæ­£é¢ç…§æ˜ã€‚  
What we need is to find a way to describe the contribution from

![[de6b0f7e4174ac10effa6705cd6fac87_MD5.svg]]

, and render it in a way that somehow simulates the diffusion process which might have occurred inside the material.  
æˆ‘ä»¬éœ€è¦çš„æ˜¯æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥æè¿° ![[de6b0f7e4174ac10effa6705cd6fac87_MD5.svg]] çš„è´¡çŒ®ï¼Œå¹¶ä»¥æŸç§æ–¹å¼æ¨¡æ‹Ÿææ–™å†…éƒ¨å¯èƒ½å‘ç”Ÿçš„æ‰©æ•£è¿‡ç¨‹æ¥æ¸²æŸ“å®ƒã€‚

##### â­ Suggested Unity Assets â­  
â­ å»ºè®®çš„Unityèµ„äº§â­

Unity is free, but you can upgrade to [**Unity Pro**](http://prf.hn/click/camref:1100l45Ay/destination:https://store.unity.com/products/unity-pro) or [**Unity Plus**](http://prf.hn/click/camref:1100l45Ay/destination:https://store.unity.com/products/unity-plus) subscriptions plans to get more functionality and training resources to power up your projects.  
Unityæ˜¯å…è´¹çš„ï¼Œä½†æ‚¨å¯ä»¥å‡çº§åˆ°Unity Proæˆ–Unity Plusè®¢é˜…è®¡åˆ’ï¼Œä»¥è·å¾—æ›´å¤šåŠŸèƒ½å’ŒåŸ¹è®­èµ„æºï¼Œä¸ºæ‚¨çš„é¡¹ç›®æä¾›åŠ¨åŠ›ã€‚

#### Back Translucency èƒŒé¢åŠé€æ˜

As discussed before, the final colour of our pixels depend is the sum of two components. The first one is the â€œtraditionalâ€ lighting. The second one is the light contribution from a virtual light source illuminating the back of our model.  
å¦‚å‰æ‰€è¿°ï¼Œåƒç´ çš„æœ€ç»ˆé¢œè‰²å–å†³äºä¸¤ä¸ªåˆ†é‡çš„æ€»å’Œã€‚ç¬¬ä¸€ç§æ˜¯â€œä¼ ç»Ÿâ€ç…§æ˜ã€‚ç¬¬äºŒä¸ªæ˜¯æ¥è‡ªç…§äº®æˆ‘ä»¬æ¨¡å‹èƒŒé¢çš„è™šæ‹Ÿå…‰æºçš„å…‰è´¡çŒ®ã€‚  
This gives the impression that light from the original source actually passed through the material.  
è¿™ç»™äººçš„å°è±¡æ˜¯ï¼Œæ¥è‡ªåŸå§‹å…‰æºçš„å…‰å®é™…ä¸Šç©¿è¿‡äº†ææ–™ã€‚

To understand how to model this mathematically, letâ€™s picture the following two scenarios (diagrams below). We are currently drawing the red point; since itâ€™s in the â€œdarkâ€ side of the material, it should be illuminated by

![[de6b0f7e4174ac10effa6705cd6fac87_MD5.svg]]

. From the perspective of an external viewer, letâ€™s analyse the two extreme cases. We can see that

![[3f0f1123c3afcf4db8101323106954ed_MD5.svg]]

is perfectly aligned with

![[de6b0f7e4174ac10effa6705cd6fac87_MD5.svg]]

, meaning that the viewer

![[2f5577fff48b59357424c3e7b4ae467d_MD5.svg]]

should see the back translucency at its fullest. On the other hand, viewer

![[02a9c8f55c26a899a6baef3776e90d6c_MD5.svg]]

should see the least amount of backlight as it is perpendicular to

![[de6b0f7e4174ac10effa6705cd6fac87_MD5.svg]]

.  
ä¸ºäº†ç†è§£å¦‚ä½•å¯¹å…¶è¿›è¡Œæ•°å­¦å»ºæ¨¡ï¼Œè®©æˆ‘ä»¬æç»˜ä»¥ä¸‹ä¸¤ä¸ªåœºæ™¯ï¼ˆä¸‹å›¾ï¼‰ã€‚æˆ‘ä»¬ç›®å‰æ­£åœ¨ç»˜åˆ¶çº¢ç‚¹ï¼›ç”±äºå®ƒä½äºæè´¨çš„â€œæš—â€é¢ï¼Œå› æ­¤åº”è¯¥ç”± ![[de6b0f7e4174ac10effa6705cd6fac87_MD5.svg]] ç…§äº®ã€‚è®©æˆ‘ä»¬ä»å¤–éƒ¨è§‚å¯Ÿè€…çš„è§’åº¦æ¥åˆ†æè¿™ä¸¤ä¸ªæç«¯çš„æ¡ˆä¾‹ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ° ![[3f0f1123c3afcf4db8101323106954ed_MD5.svg]] ä¸ ![[de6b0f7e4174ac10effa6705cd6fac87_MD5.svg]] å®Œå…¨å¯¹é½ï¼Œè¿™æ„å‘³ç€è§‚çœ‹è€… ![[2f5577fff48b59357424c3e7b4ae467d_MD5.svg]] åº”è¯¥çœ‹åˆ°æœ€å……åˆ†çš„èƒŒéƒ¨åŠé€æ˜ã€‚å¦ä¸€æ–¹é¢ï¼Œè§‚çœ‹è€…#4åº”è¯¥çœ‹åˆ°æœ€å°‘é‡çš„èƒŒå…‰ï¼Œå› ä¸ºå®ƒå‚ç›´äº ![[de6b0f7e4174ac10effa6705cd6fac87_MD5.svg]] ã€‚

![[b5ab8a1abc61020e59dcc6fc96a9886e_MD5.png]]

If you are not new to shader coding, this kind of reasoning should sound familiar. We have encountered something similar in the tutorial on [Physically Based Rendering and Lighting Models in Unity 5](https://www.alanzucconi.com/2015/06/24/physically-based-rendering/), where we showed how such a behaviour can be obtained using a mathematical operator called the **dot product**.  
å¦‚æœæ‚¨ä¸æ˜¯ç€è‰²å™¨ç¼–ç çš„æ–°æ‰‹ï¼Œé‚£ä¹ˆè¿™ç§æ¨ç†å¬èµ·æ¥åº”è¯¥å¾ˆç†Ÿæ‚‰ã€‚æˆ‘ä»¬åœ¨Unity 5ä¸­çš„åŸºäºç‰©ç†çš„æ¸²æŸ“å’Œç…§æ˜æ¨¡å‹æ•™ç¨‹ä¸­é‡åˆ°äº†ç±»ä¼¼çš„æƒ…å†µï¼Œæˆ‘ä»¬åœ¨æ•™ç¨‹ä¸­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ç§°ä¸ºç‚¹ç§¯çš„æ•°å­¦è¿ç®—ç¬¦æ¥è·å¾—è¿™ç§è¡Œä¸ºã€‚

As a first approximation, we can say that the amount of back lighting due to translucency

![[77be0d22c18fa441799ca59d997d6530_MD5.svg]]

is proportional to

![[a6755234b26e09e34643504574dc533e_MD5.svg]]

. In a traditional diffuse shader, this would be

![[71aaed56eafdeb65c7c2232a4625eebf_MD5.svg]]

. We can see that we have not included the **surface normal** in the calculation, as light is simply coming out of the material, not reflecting on it.  
ä½œä¸ºç¬¬ä¸€è¿‘ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥è¯´ç”±äºåŠé€æ˜æ€§ ![[77be0d22c18fa441799ca59d997d6530_MD5.svg]] å¼•èµ·çš„èƒŒå…‰é‡ä¸ ![[a6755234b26e09e34643504574dc533e_MD5.svg]] æˆæ¯”ä¾‹ã€‚åœ¨ä¼ ç»Ÿçš„æ¼«åå°„ç€è‰²å™¨ä¸­ï¼Œè¿™å°†æ˜¯#2ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ²¡æœ‰å°†è¡¨é¢æ³•çº¿åŒ…æ‹¬åœ¨è®¡ç®—ä¸­ï¼Œå› ä¸ºå…‰åªæ˜¯ä»ææ–™ä¸­å‡ºæ¥ï¼Œè€Œä¸æ˜¯åœ¨ææ–™ä¸Šåå°„ã€‚

#### Subsurface Distortion åœ°ä¸‹å˜å½¢

However, the surface normal should have some influence, even if minor, on the angle at which the light is leaving the material. The authors of this technique introduced a parameter, called **subsurfaceÂ distortion** 

![[7b83dd97a534ee5f4956f01f429280f3_MD5.svg]]

, which forces the vector

![[de6b0f7e4174ac10effa6705cd6fac87_MD5.svg]]

to point towards

![[8a94681732dbd73fe32666914e2f3c3a_MD5.svg]]

. Physically speaking, this the subsurface distortion controls how strongly the surface normal deflects the outgoing back light. Following the solution proposed, the intensity of the back translucency component becomes:  
ä½†æ˜¯ï¼Œæ›²é¢æ³•çº¿åº”è¯¥å¯¹å…‰ç¦»å¼€æè´¨çš„è§’åº¦æœ‰ä¸€äº›å½±å“ï¼Œå³ä½¿å½±å“å¾ˆå°ã€‚è¯¥æŠ€æœ¯çš„ä½œè€…å¼•å…¥äº†ä¸€ä¸ªç§°ä¸ºæ¬¡è¡¨é¢å¤±çœŸ ![[7b83dd97a534ee5f4956f01f429280f3_MD5.svg]] çš„å‚æ•°ï¼Œè¯¥å‚æ•°è¿«ä½¿å‘é‡ ![[de6b0f7e4174ac10effa6705cd6fac87_MD5.svg]] æŒ‡å‘ ![[8a94681732dbd73fe32666914e2f3c3a_MD5.svg]] ã€‚ä»ç‰©ç†ä¸Šè®²ï¼Œè¿™ç§æ¬¡è¡¨é¢æ‰­æ›²æ§åˆ¶äº†æ›²é¢æ³•çº¿åè½¬å‡ºå°„èƒŒå…‰çš„å¼ºåº¦ã€‚æ ¹æ®æ‰€æå‡ºçš„è§£å†³æ–¹æ¡ˆï¼ŒèƒŒé¢åŠé€æ˜æˆåˆ†çš„å¼ºåº¦å˜ä¸ºï¼š

![[3c0b27df270d9ce1735988f1dc1fda2d_MD5.svg]]

Where

![[116071e829dca877596167040768da2a_MD5.svg]]

is a unit vector that points in the same direction of

![[5e9cfe60d018a42d920f0469bbb1bfea_MD5.svg]]

. If you are familiar with Cg/HLSL, that is the  
å…¶ä¸­ ![[116071e829dca877596167040768da2a_MD5.svg]] æ˜¯æŒ‡å‘ ![[5e9cfe60d018a42d920f0469bbb1bfea_MD5.svg]] çš„ç›¸åŒæ–¹å‘çš„å•ä½å‘é‡ã€‚å¦‚æœæ‚¨ç†Ÿæ‚‰Cg/HLSLï¼Œé‚£å°±æ˜¯

normalize è§„èŒƒåŒ–

`normalize`

function.

When

![[34fbd8f7c4af29ae87ced60c97f93fcd_MD5.svg]]

, we return to the

![[e8281c5f786ec63a08b539c3f47862e4_MD5.svg]]

derived in the previous paragraph. When

![[d97b9610c75470a253a8370fa71d2835_MD5.svg]]

, however, we are calculating the dot product between the view direction and

![[5ddf21469c28af4c04473ba8e1914c79_MD5.svg]]

. If you are familiar with the **Blinn-Phong reflectance**, you should know that

![[bac4e4acfb1e3ab7893fa4c6b2c420a6_MD5.svg]]

is the vector â€œin betweenâ€

![[3e10ca3f0fa97a107f57c751bd63093b_MD5.svg]]

and

![[8a94681732dbd73fe32666914e2f3c3a_MD5.svg]]

. For this reason, we will call it as the **halfway direction**

![[3a8afad22c8964cae762a4502d073895_MD5.svg]]

.  
å½“ ![[34fbd8f7c4af29ae87ced60c97f93fcd_MD5.svg]] æ—¶ï¼Œæˆ‘ä»¬è¿”å›åˆ°å‰ä¸€æ®µä¸­æ´¾ç”Ÿçš„ ![[e8281c5f786ec63a08b539c3f47862e4_MD5.svg]] ã€‚ç„¶è€Œï¼Œå½“#2æ—¶ï¼Œæˆ‘ä»¬æ­£åœ¨è®¡ç®—è§†å›¾æ–¹å‘å’Œ#3ä¹‹é—´çš„ç‚¹ç§¯ã€‚å¦‚æœæ‚¨ç†Ÿæ‚‰Blinn Phongåå°„ï¼Œæ‚¨åº”è¯¥çŸ¥é“#4æ˜¯â€œä»‹äºâ€ ![[3e10ca3f0fa97a107f57c751bd63093b_MD5.svg]] å’Œ ![[8a94681732dbd73fe32666914e2f3c3a_MD5.svg]] ä¹‹é—´çš„å‘é‡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸ºä¸­é—´æ–¹å‘ ![[3a8afad22c8964cae762a4502d073895_MD5.svg]] ã€‚

![[418302b2701d3908854aab294af5ba8c_MD5.png]]

The diagram above shows all the directions used so far.

![[3a8afad22c8964cae762a4502d073895_MD5.svg]]

is indicated in purple, and you can see that it rests in between

![[3e10ca3f0fa97a107f57c751bd63093b_MD5.svg]]

and

![[8a94681732dbd73fe32666914e2f3c3a_MD5.svg]]

. Geometrically speaking, varying

![[7b83dd97a534ee5f4956f01f429280f3_MD5.svg]]

from

![[410dbcc5a2353eb7b4744509d1576118_MD5.svg]]

to

![[5eff21c228bf24ccad0cf9832e9bca51_MD5.svg]]

causes a shift in the perceived direction of the light

![[3e10ca3f0fa97a107f57c751bd63093b_MD5.svg]]

. The light shaded area shows the range of directions the backlight will come from. In the image below you can see that with

![[34fbd8f7c4af29ae87ced60c97f93fcd_MD5.svg]]

, the object seems to be illuminated from the purple light source. When

![[7b83dd97a534ee5f4956f01f429280f3_MD5.svg]]

moved towards

![[5eff21c228bf24ccad0cf9832e9bca51_MD5.svg]]

, the perceived direction of the light source shifts towards the purple one.  
ä¸Šå›¾æ˜¾ç¤ºäº†è¿„ä»Šä¸ºæ­¢ä½¿ç”¨çš„æ‰€æœ‰æ–¹å‘ ![[3a8afad22c8964cae762a4502d073895_MD5.svg]] ç”¨ç´«è‰²è¡¨ç¤ºï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å®ƒä½äº ![[3e10ca3f0fa97a107f57c751bd63093b_MD5.svg]] å’Œ ![[8a94681732dbd73fe32666914e2f3c3a_MD5.svg]] ä¹‹é—´ã€‚ä»å‡ ä½•è§’åº¦è®²ï¼Œä»#4åˆ° ![[5eff21c228bf24ccad0cf9832e9bca51_MD5.svg]] æ”¹å˜#3ä¼šå¯¼è‡´å…‰ ![[3e10ca3f0fa97a107f57c751bd63093b_MD5.svg]] çš„æ„ŸçŸ¥æ–¹å‘å‘ç”Ÿåç§»ã€‚æµ…è‰²é˜´å½±åŒºåŸŸæ˜¾ç¤ºèƒŒå…‰çš„æ–¹å‘èŒƒå›´ã€‚åœ¨ä¸‹å›¾ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°ä½¿ç”¨ ![[34fbd8f7c4af29ae87ced60c97f93fcd_MD5.svg]] ï¼Œå¯¹è±¡ä¼¼ä¹æ˜¯ç”±ç´«è‰²å…‰æºç…§äº®çš„ã€‚å½“ ![[7b83dd97a534ee5f4956f01f429280f3_MD5.svg]] å‘ ![[5eff21c228bf24ccad0cf9832e9bca51_MD5.svg]] ç§»åŠ¨æ—¶ï¼Œå…‰æºçš„æ„ŸçŸ¥æ–¹å‘å‘ç´«è‰²ç§»åŠ¨ã€‚

![[3c974e7fba06cace6044d51ca5a5bc15_MD5.png]]

The purpose of

![[7b83dd97a534ee5f4956f01f429280f3_MD5.svg]]

is to simulate the tendency of certain translucent materials to diffuse the backlight with different intensities. Higher values of

![[7b83dd97a534ee5f4956f01f429280f3_MD5.svg]]

will cause the back light to scatter more. ![[7b83dd97a534ee5f4956f01f429280f3_MD5.svg]] çš„ç›®çš„æ˜¯æ¨¡æ‹ŸæŸäº›åŠé€æ˜ææ–™ä»¥ä¸åŒå¼ºåº¦æ•£å°„èƒŒå…‰çš„è¶‹åŠ¿ã€‚ ![[7b83dd97a534ee5f4956f01f429280f3_MD5.svg]] çš„å€¼è¶Šé«˜ï¼ŒèƒŒå…‰æ•£å°„è¶Šå¤§ã€‚

â“ Is this H the same H used in the Blinn-Phong Reflectance?  
â“ è¿™ä¸ªHä¸â€œBlinn Phong Reflectanceâ€ä¸­ä½¿ç”¨çš„Hç›¸åŒå—ï¼Ÿ

â“ Is ğ›¿ really interpolating between L and L+N?  
â“ æ˜¯ğ›¿ çœŸçš„åœ¨Lå’ŒL+Nä¹‹é—´æ’å€¼ï¼Ÿ

â“ How come the authors did not normalise L+N?  
â“ ä¸ºä»€ä¹ˆä½œè€…æ²¡æœ‰å°†L+Næ ‡å‡†åŒ–ï¼Ÿ

#### Back Light Diffusion èƒŒå…‰æ¼«å°„

At this point in the tutorial, we already have an equation that we can use simulate translucent materials. The quantity

![[77be0d22c18fa441799ca59d997d6530_MD5.svg]]

can not be used to calculate the final light contribution.  
åœ¨æ•™ç¨‹çš„è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªå¯ä»¥ç”¨æ¥æ¨¡æ‹ŸåŠé€æ˜æè´¨çš„æ–¹ç¨‹å¼ã€‚æ•°é‡ ![[77be0d22c18fa441799ca59d997d6530_MD5.svg]] ä¸èƒ½ç”¨äºè®¡ç®—æœ€ç»ˆçš„å…‰è´¡çŒ®ã€‚

There are two main approaches that can be used. The first oneÂ relies on a texture. If you want to have full artistic control on the way light diffuses in the material, you should clamp

![[77be0d22c18fa441799ca59d997d6530_MD5.svg]]

between

![[410dbcc5a2353eb7b4744509d1576118_MD5.svg]]

and

![[5eff21c228bf24ccad0cf9832e9bca51_MD5.svg]]

, and use it to sample the final intensity of the back light. Different ramp textures will simulate the light transport within different materials. We will see in the next part of this tutorial how this can be used to change the result of this shader dramatically.  
å¯ä»¥ä½¿ç”¨ä¸¤ç§ä¸»è¦æ–¹æ³•ã€‚ç¬¬ä¸€ä¸ªä¾èµ–äºçº¹ç†ã€‚å¦‚æœå¸Œæœ›å¯¹ç¯å…‰åœ¨æè´¨ä¸­çš„æ¼«å°„æ–¹å¼è¿›è¡Œå®Œå…¨çš„è‰ºæœ¯æ§åˆ¶ï¼Œåˆ™åº”å°† ![[77be0d22c18fa441799ca59d997d6530_MD5.svg]] å¤¹åœ¨ ![[410dbcc5a2353eb7b4744509d1576118_MD5.svg]] å’Œ ![[5eff21c228bf24ccad0cf9832e9bca51_MD5.svg]] ä¹‹é—´ï¼Œå¹¶ä½¿ç”¨å®ƒå¯¹èƒŒå…‰çš„æœ€ç»ˆå¼ºåº¦è¿›è¡Œé‡‡æ ·ã€‚ä¸åŒçš„æ¸å˜çº¹ç†å°†æ¨¡æ‹Ÿä¸åŒæè´¨ä¸­çš„å…‰ä¼ è¾“ã€‚æˆ‘ä»¬å°†åœ¨æœ¬æ•™ç¨‹çš„ä¸‹ä¸€éƒ¨åˆ†ä¸­çœ‹åˆ°å¦‚ä½•ä½¿ç”¨å®ƒæ¥æ˜¾è‘—æ›´æ”¹æ­¤ç€è‰²å™¨çš„ç»“æœã€‚

The approach used by the author of this technique, however, does not rely on a texture. It creates a curve using Cg code only:  
ç„¶è€Œï¼Œè¿™é¡¹æŠ€æœ¯çš„ä½œè€…æ‰€ä½¿ç”¨çš„æ–¹æ³•å¹¶ä¸ä¾èµ–äºçº¹ç†ã€‚å®ƒä»…ä½¿ç”¨Cgä»£ç åˆ›å»ºæ›²çº¿ï¼š

![[da7dd174778008ac8c26c31cc3b56af2_MD5.svg]]

The two new parameters,

![[64ceea966e694f8f5a1b7636ddcb027f_MD5.svg]]

(_power_) and

![[05c6a4cae1c47ec968f751cd6c9f08a9_MD5.svg]]

(_scale_) are used to change the properties of the curve.  
ä¸¤ä¸ªæ–°å‚æ•° ![[64ceea966e694f8f5a1b7636ddcb027f_MD5.svg]] ï¼ˆåŠŸç‡ï¼‰å’Œ ![[05c6a4cae1c47ec968f751cd6c9f08a9_MD5.svg]] ï¼ˆæ¯”ä¾‹ï¼‰ç”¨äºæ›´æ”¹æ›²çº¿çš„ç‰¹æ€§ã€‚

#### Conclusion ç»“è®º

This post explains the technical challenges in rendering translucent materials. An approximate solution is introduced, followed the approach presented by [Approximating Translucency for a Fast, Cheap and Convincing Subsurface Scattering Look](https://colinbarrebrisebois.com/2011/03/07/gdc-2011-approximating-translucency-for-a-fast-cheap-and-convincing-subsurface-scattering-look/). The next part of this tutorial will focus on how to actually implement this effect in a shader in Unity.  
è¿™ç¯‡æ–‡ç« è§£é‡Šäº†æ¸²æŸ“åŠé€æ˜æè´¨çš„æŠ€æœ¯æŒ‘æˆ˜ã€‚ä»‹ç»äº†ä¸€ç§è¿‘ä¼¼è§£ï¼Œéµå¾ªäº†è¿‘ä¼¼åŠé€æ˜çš„æ–¹æ³•ï¼Œä»¥è·å¾—å¿«é€Ÿã€å»‰ä»·å’Œä»¤äººä¿¡æœçš„äºšè¡¨é¢æ•£å°„å¤–è§‚ã€‚æœ¬æ•™ç¨‹çš„ä¸‹ä¸€éƒ¨åˆ†å°†é‡ç‚¹ä»‹ç»å¦‚ä½•åœ¨Unityä¸­çš„ç€è‰²å™¨ä¸­å®é™…å®ç°æ­¤æ•ˆæœã€‚

*   Part 1.Â **Fast Subsurface Scattering in Unity**  
    ç¬¬1éƒ¨åˆ†ã€‚Unityä¸­çš„å¿«é€Ÿæ¬¡è¡¨é¢æ•£å°„
*   Part 2.Â [Fast Subsurface Scattering in Unity](https://www.alanzucconi.com/?p=7101)  
    ç¬¬2éƒ¨åˆ†ã€‚Unityä¸­çš„å¿«é€Ÿæ¬¡è¡¨é¢æ•£å°„

If you are interested in more sophisticated approaches to simulate subsurface scattering for real time applications, [GPU Gems](https://developer.nvidia.com/gpugems/gpugems/part-iii-materials/chapter-16-real-time-approximations-subsurface-scattering) provides one of the best tutorials you can find.  
å¦‚æœæ‚¨å¯¹å®æ—¶åº”ç”¨ä¸­æ¨¡æ‹Ÿæ¬¡è¡¨é¢æ•£å°„çš„æ›´å¤æ‚æ–¹æ³•æ„Ÿå…´è¶£ï¼ŒGPU Gemsæä¾›äº†æ‚¨èƒ½æ‰¾åˆ°çš„æœ€å¥½çš„æ•™ç¨‹ä¹‹ä¸€ã€‚

  
You can download all the necessary files to run this project (shader, textures, models, scenes) on [**Patreon**](https://www.patreon.com/posts/14122322).  
æ‚¨å¯ä»¥ä¸‹è½½åœ¨Patreonä¸Šè¿è¡Œæ­¤é¡¹ç›®æ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆç€è‰²å™¨ã€çº¹ç†ã€æ¨¡å‹ã€åœºæ™¯ï¼‰ã€‚

##### ğŸ’– Support this blog  
ğŸ’– æ”¯æŒæ­¤åšå®¢

This website exists thanks to the contribution of patrons on Patreon. If you think these posts have either helped or inspired you, please consider supporting this blog.  
è¿™ä¸ªç½‘ç«™çš„å­˜åœ¨è¦å½’åŠŸäºPatreonä¸Šçš„èµåŠ©äººçš„è´¡çŒ®ã€‚å¦‚æœä½ è®¤ä¸ºè¿™äº›å¸–å­å¯¹ä½ æœ‰å¸®åŠ©æˆ–å¯å‘ï¼Œè¯·è€ƒè™‘æ”¯æŒè¿™ä¸ªåšå®¢ã€‚

[![[0c3d2dbb741234c033de23e6353206be_MD5.png]]](https://www.patreon.com/AlanZucconi)

[

![[f3c58f57f1780ee8adf69004e1e3fc20_MD5.png]]

](https://www.patreon.com/bePatron?u=850572)

[![[9575c46ce3be18fce4c45421b07185d2_MD5.png]]](https://www.youtube.com/c/AlanZucconi)

##### ğŸ“§ Stay updated

You will be notified when a new tutorial is released!

##### ğŸ“ Licensing

You are free to use, adapt and build upon this tutorial for your own projects (even commercially) as long as you credit me.

You are not allowed to redistribute the content of this tutorial on other platforms, especially the parts that are only available on Patreon.

If the knowledge you have gained had a significant impact on your project, a mention in the credit would be very appreciated. â¤ï¸ğŸ§”ğŸ»