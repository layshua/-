

# 光照探针
```c file:光照探针
float4 frag(VertexOutput i): SV_Target 
{
    return  SampleSH(i.normalWS);
}
```


# 烘焙光照
```cs
#pragma multi_compile _ LIGHTMAP_ON  //关键字
```

用于对光照贴图进行采样的坐标存储在第二纹理坐标通道 TEXCOORD1中

```c h:10,20,28,29,51,60,67
Shader "Custom/NormalMap"
{
    Properties
    {
    }
    
    HLSLINCLUDE

    #include "Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl"
    #include "Packages/com.unity.render-pipelines.universal/ShaderLibrary/lighting.hlsl"

    CBUFFER_START(UnityPerMateiral)
    CBUFFER_END

    struct Attributes
    {
        float4 positionOS : POSITION;
        float3 normalOS : NORMAL;
        float2 uv : TEXCOORD0;
        float2 uvLM : TEXCOORD1;
    };

    struct Varyings
    {
        float4 positionCS : SV_POSITION;
        float2 uv : TEXCOORD0;
        float3 normalWS : TEXCOORD1;
        float2 uvLM : TEXCOORD2;
        float3 vertexSH : TEXCOORD3;
    };
    ENDHLSL
    
    SubShader
    {
        Tags
        {
            "RenderPipeline" = "UniversalPipeline"
            "RenderType"="Opaque" 
        }

        Pass
        {
            Tags
            {
                "LightMode"="UniversalForward"
            }
            
            HLSLPROGRAM
            #pragma vertex vert
            #pragma fragment frag
            #pragma multi_compile _ LIGHTMAP_ON //关键字
            
            Varyings vert(Attributes i)
            {
                Varyings o = (Varyings)0;

                o.positionCS = TransformObjectToHClip(i.positionOS.xyz);
                o.uv = i.uv;
                o.normalWS = TransformObjectToWorldNormal(i.normalOS);
                OUTPUT_LIGHTMAP_UV(i.uvLM, unity_LightmapST, o.uvLM); 
                return o;
            }

            float4 frag(Varyings i) : SV_Target
            {
                //颜色计算
                half3 bakedGI = SAMPLE_GI(i.uvLM, i.vertexSH, i.normalWS);
                return float4(bakedGI,1);
            }
            ENDHLSL
        }
    }
}
```