# Unity 内置雾
缺点：要为场景中所有物体的 shader 添加代码，实现的效果有限。
# 全局雾效

基于屏幕后处理的全局雾效，不需要改 shader 代码。自由度很高

关键：根据深度纹理来重建每个像素在世界空间下的位置。

在简单的雾效实现中，我们需要计算一个**雾效系数**$f$，作为混合原始颜色和雾的颜色的**混合系数**;
这个雾效系数 $f$ 有很多计算方法。在 Unity 内置的雾效实现中，支持三种雾的计算方式——线性（Linear）、指数（Exponential）以及指数的平方（Exponential Squared）。

当给定距离 $z$ 后，$f$ 的计算公式分别如下:

- **Linear**：$d_{min}$ 和 $d_{max}$ 分别表示受雾影响的最小距离和最大距离
$$
f=\frac{d_{max}-\mid z\mid}{d_{max}-d_{min}}
$$
- **Exponential**：$d$ 是控制雾的浓度的参数
$$
f=e^{-d\cdot|z|}
$$
- **Exponential Squared**：$d$ 是控制雾的浓度的参数
$$
f=e^{-(d-|z|)^2}
$$

## 基于高度的雾效
当给定一点在世界空间下的高度 $y$ 后，$f$ 的计算公式为：
$$
f=\frac{H_{end}-y}{H_{end}-H_{start}}
$$
$H_{far}$, 和 $H_{end}$ 分别表示受雾影响的起始高度和终止高度
