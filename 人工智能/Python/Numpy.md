# 介绍
NumPy 是使用 Python 进行科学计算的基础包。它包含如下的内容：

-   一个强大的N维数组对象。
-   复杂的（广播）功能。
-   用于集成C / C ++和Fortran代码的工具。
-   有用的线性代数，傅里叶变换和随机数功能。

除了明显的科学用途外，NumPy还可以用作通用数据的高效多维容器。可以定义任意数据类型。这使NumPy能够无缝快速地与各种数据库集成。

在这篇文章中，我们将介绍使用 NumPy 的基础知识，NumPy 是一个功能强大的 Python 库，允许更高级的数据操作和数学计算。
```python nums
#导入Numpy，通过写成这样的形式，之后 NumPy 相关的方法均可通过 np 来调用。
import numpy as np
```
# 数组基础

## 创建一个数组

NumPy 围绕这些称为数组的事物展开。实际上它被称之为 `ndarrays`，你不知道没事儿。使用 NumPy 提供的这些数组，我们就可以以闪电般的速度执行各种有用的操作，如矢量和矩阵、线性代数等数学运算！

```python nums
# 1D Array
a = np.array([0, 1, 2, 3, 4])
b = np.array((0, 1, 2, 3, 4))
c = np.arange(5)
d = np.linspace(0, 2*np.pi, 5)

print(a) # >>>[0 1 2 3 4]
print(b) # >>>[0 1 2 3 4]
print(c) # >>>[0 1 2 3 4]
print(d) # >>>[ 0.          1.57079633  3.14159265  4.71238898  6.28318531]
print(a[3]) # >>>3
```

上面的代码显示了创建数组的 4 种不同方法。**最基本的方法是将序列传递给 NumPy 的 array() 函数; 你可以传递任何序列（类数组），而不仅仅是常见的列表（list）数据类型。**
对数组进行索引就像列表或任何其他 Python 序列一样。你也可以对它们进行切片。

上面的数组示例是如何使用 NumPy 表示向量的，接下来我们将看看如何使用多维数组表示矩阵和更多的信息。

```python nums
# MD Array,
a = np.array([[11, 12, 13, 14, 15],
              [16, 17, 18, 19, 20],
              [21, 22, 23, 24, 25],
              [26, 27, 28 ,29, 30],
              [31, 32, 33, 34, 35]])
 
print(a[2,4]) # >>>25
```

为了创建一个 2D（二维）数组，我们传递一个列表的列表（或者是一个序列的序列）给 array() 函数。
如果我们想要一个 3D（三维）数组，我们就要传递一个列表的列表的列表，
如果是一个 4D（四维）数组，那就是列表的列表的列表的列表，以此类推。

请注意 2D（二维）数组（在我们的朋友空格键的帮助下）是如何按行和列排列的。要索引 2D（二维）数组，我们只需引用行数和列数即可。

##  多维数组切片

切片多维数组比 1D 数组复杂一点，并且在使用 NumPy 时你也会经常需要使用到。

```python nums
# MD slicing
print(a[0, 1:4]) # >>>[12 13 14]
print(a[1:4, 0]) # >>>[16 21 26]
print(a[::2,::2]) # >>>[[11 13 15]
                  #     [21 23 25]
                  #     [31 33 35]]
print(a[:, 1]) # >>>[12 17 22 27 32]
```

如你所见，通过对每个以逗号分隔的维度执行单独的切片，你可以对多维数组进行切片。因此，对于 2D 数组，我们的**第一片定义了行的切片，第二片定义了列的切片**。

注意，只需输入数字就可以指定行或列。上面的第一个示例从数组中选择第 0 列。

下面的图表说明了给定的示例切片是如何进行工作的。

![](1681625876015.png)

## [#](#数组属性) 数组属性

在使用 NumPy 时，你会想知道数组的某些信息。很幸运，在这个包里边包含了很多便捷的方法，可以给你想要的信息。

```
# Array properties
a = np.array([[11, 12, 13, 14, 15],
              [16, 17, 18, 19, 20],
              [21, 22, 23, 24, 25],
              [26, 27, 28 ,29, 30],
              [31, 32, 33, 34, 35]])

print(type(a)) # >>><class 'numpy.ndarray'>
print(a.dtype) # >>>int64
print(a.size) # >>>25
print(a.shape) # >>>(5, 5)
print(a.itemsize) # >>>8
print(a.ndim) # >>>2
print(a.nbytes) # >>>200
```

正如你在上面的代码中看到的，NumPy 数组实际上被称为 ndarray。我不知道为什么他妈的它叫 ndarray，如果有人知道请留言！我猜它代表 n 维数组。

数组的形状是它有多少行和列，上面的数组有 5 行和 5 列，所以它的形状是 (5，5)。

`itemsize`属性是每个项占用的字节数。这个数组的数据类型是 int 64，一个 int 64 中有 64 位，一个字节中有 8 位，除以 64 除以 8，你就可以得到它占用了多少字节，在本例中是 8。

`ndim` 属性是数组的维数。这个有 2 个。例如，向量只有 1。

`nbytes` 属性是数组中的所有数据消耗掉的字节数。你应该注意到，这并不计算数组的开销，因此数组占用的实际空间将稍微大一点。

[#](#使用数组) 使用数组

### [#](#基本操作符) 基本操作符

只是能够从数组中创建和检索元素和属性不能满足你的需求，你有时也需要对它们进行数学运算。 你完全可以使用四则运算符 +、- 、/ 来完成运算操作。

```
# Basic Operators
a = np.arange(25)
a = a.reshape((5, 5))

b = np.array([10, 62, 1, 14, 2, 56, 79, 2, 1, 45,
              4, 92, 5, 55, 63, 43, 35, 6, 53, 24,
              56, 3, 56, 44, 78])
b = b.reshape((5,5))

print(a + b)
print(a - b)
print(a * b)
print(a / b)
print(a ** 2)
print(a < b) print(a > b)

print(a.dot(b))
```

除了 dot() 之外，这些操作符都是对数组进行逐元素运算。比如 (a, b, c) + (d, e, f) 的结果就是 (a+d, b+e, c+f)。它将分别对每一个元素进行配对，然后对它们进行运算。它返回的结果是一个数组。注意，当使用逻辑运算符比如 “<” 和 “>” 的时候，返回的将是一个布尔型数组，这点有一个很好的用处，后边我们会提到。

dot() 函数计算两个数组的点积。它返回的是一个标量（只有大小没有方向的一个值）而不是数组。

### [#](#它背后的一些数学知识-1) 它背后的一些数学知识

dot() 函数称为点积。理解这一点的最好方法是看下图，下图将表示它是如何进行计算的。

![](1681625876242.png)

### [#](#数组特殊运算符) 数组特殊运算符

NumPy 还提供了一些别的用于处理数组的好用的运算符。

```
# dot, sum, min, max, cumsum
a = np.arange(10)

print(a.sum()) # >>>45
print(a.min()) # >>>0
print(a.max()) # >>>9
print(a.cumsum()) # >>>[ 0  1  3  6 10 15 21 28 36 45]
```

sum()、min() 和 max() 函数的作用非常明显。将所有元素相加，找出最小和最大元素。

然而，cumsum() 函数就不那么明显了。它将像 sum() 这样的每个元素相加，但是它首先将第一个元素和第二个元素相加，并将计算结果存储在一个列表中，然后将该结果添加到第三个元素中，然后再将该结果存储在一个列表中。这将对数组中的所有元素执行此操作，并返回作为列表的数组之和的运行总数。

## [#](#索引进阶) 索引进阶

### [#](#花式索引) 花式索引

`花式索引` 是获取数组中我们想要的特定元素的有效方法。

```
# Fancy indexing
a = np.arange(0, 100, 10)
indices = [1, 5, -1]
b = a[indices]
print(a) # >>>[ 0 10 20 30 40 50 60 70 80 90]
print(b) # >>>[10 50 90]
```

正如你在上面的示例中所看到的，我们使用我们想要检索的特定索引序列对数组进行索引。这反过来返回我们索引的元素的列表。

### [#](#布尔屏蔽) 布尔屏蔽

布尔屏蔽是一个有用的功能，它允许我们根据我们指定的条件检索数组中的元素。

```
# Boolean masking
import matplotlib.pyplot as plt

a = np.linspace(0, 2 * np.pi, 50)
b = np.sin(a)
plt.plot(a,b)
mask = b >= 0
plt.plot(a[mask], b[mask], 'bo')
mask = (b >= 0) & (a <= np.pi / 2)
plt.plot(a[mask], b[mask], 'go')
plt.show()
```

上面的示例显示了如何进行布尔屏蔽。你所要做的就是将数组传递给涉及数组的条件，它将为你提供一个值的数组，为该条件返回 true。

该示例生成以下图：

![](1681625876478.png)

我们利用这些条件来选择图上的不同点。蓝色点 (在图中还包括绿点，但绿点掩盖了蓝色点)，显示值大于 0 的所有点。绿色点表示值大于 0 且小于一半π的所有点。

### [#](#缺省索引) 缺省索引

不完全索引是从多维数组的第一个维度获取索引或切片的一种方便方法。例如，如果数组 a=[1，2，3，4，5]，[6，7，8，9，10]，那么 [3] 将在数组的第一个维度中给出索引为 3 的元素，这里是值 4。

```
# Incomplete Indexing
a = np.arange(0, 100, 10)
b = a[:5]
c = a[a >= 50]
print(b) # >>>[ 0 10 20 30 40]
print(c) # >>>[50 60 70 80 90]
```

### [#](#where-函数) Where 函数

where() 函数是另外一个根据条件返回数组中的值的有效方法。只需要把条件传递给它，它就会返回一个使得条件为真的元素的列表。

```
# Where
a = np.arange(0, 100, 10)
b = np.where(a < 50) 
c = np.where(a >= 50)[0]
print(b) # >>>(array([0, 1, 2, 3, 4]),)
print(c) # >>>[5 6 7 8 9]
```

这就是 NumPy，没那么难吧？当然，这篇文章只涵盖了入门的基础知识，在 NumPy 中你还可以做许多其他好玩的事情，当你已经熟悉了 NumPy 的基础知识，你就可以开始自由的探索 NumPy 的世界了。

## [#](#最后别忘了分享这篇文章噢) 最后别忘了分享这篇文章噢

要记得，不要忘了分享这篇文章，这样其他人就也可以看到了！另外，记得订阅这个博客的邮件列表，关注我的 Twitter 和 Google+，这样你就不会错过任何有价值的文章了！

我会阅读所有的评论，如果你有什么想说的，想分享的，想问的或者喜欢的，请在下边留言！

# 创建 Numpy 数组的不同方式
Numpy 库的核心是数组对象或 ndarray 对象（n 维数组）。你将使用 Numpy 数组执行逻辑，统计和傅里叶变换等运算。作为使用 Numpy 的一部分，你要做的第一件事就是创建 Numpy 数组。本指南的主要目的是帮助数据科学爱好者了解可用于创建 Numpy 数组的不同方式。

创建 Numpy 数组有三种不同的方法：

1.  使用 Numpy 内部功能函数
2.  从列表等其他 Python 的结构进行转换
3.  使用特殊的库函数

## [#](#使用numpy内部功能函数) 使用 Numpy 内部功能函数

Numpy 具有用于创建数组的内置函数。 我们将在本指南中介绍其中一些内容。

### [#](#创建一个一维的数组) 创建一个一维的数组

首先，让我们创建一维数组或 rank 为 1 的数组。`arange`是一种广泛使用的函数，用于快速创建数组。将值 20 传递给`arange`函数会创建一个值范围为 0 到 19 的数组。

```
import Numpy as np
array = np.arange(20)
array
```

输出：

```
array([0,  1,  2,  3,  4,
       5,  6,  7,  8,  9,
       10, 11, 12, 13, 14,
       15, 16, 17, 18, 19])
```

要验证此数组的维度，请使用 shape 属性。

输出：

由于逗号后面没有值，因此这是一维数组。 要访问此数组中的值，请指定非负索引。 与其他编程语言一样，索引从零开始。 因此，要访问数组中的第四个元素，请使用索引 3。

输出：

Numpy 的数组是可变的，这意味着你可以在初始化数组后更改数组中元素的值。 使用 print 函数查看数组的内容。

```
array.shape
```

输出：

```
(20,)
```

与 Python 列表不同，Numpy 数组的内容是同质的。 因此，如果你尝试将字符串值分配给数组中的元素，其数据类型为 int，则会出现错误。

输出：

```
array[3]
```

### [#](#创建一个二维数组) 创建一个二维数组

我们来谈谈创建一个二维数组。 如果只使用 arange 函数，它将输出一维数组。 要使其成为二维数组，请使用 reshape 函数链接其输出。

输出：

```
array[3] = 100
print(array)
```

首先，将创建 20 个整数，然后将数组转换为具有 4 行和 5 列的二维数组。 我们来检查一下这个数组的维数。

由于我们得到两个值，这是一个二维数组。 要访问二维数组中的元素，需要为行和列指定索引。

输出：

### [#](#创建三维数组及更多维度) 创建三维数组及更多维度

要创建三维数组，请为重塑形状函数指定 3 个参数。

```
[  0   1   2 100
   4   5   6   7
   8   9  10  11
   12  13  14  15
   16  17  18  19]
```

输出：

```
array[3] ='Numpy'
```

需要注意的是：数组中元素的数量（27）必须是其尺寸（3 * 3 * 3）的乘积。 要交叉检查它是否是三维数组，可以使用 shape 属性。

输出：

此外，使用`arange`函数，你可以创建一个在定义的起始值和结束值之间具有特定序列的数组。

输出：

```
ValueError: invalid literal for int() with base 10: 'Numpy'
```

### [#](#使用其他numpy函数) 使用其他 Numpy 函数

除了 arange 函数之外，你还可以使用其他有用的函数（如 `zeros` 和 `ones`）来快速创建和填充数组。

使用`zeros`函数创建一个填充零的数组。函数的参数表示行数和列数（或其维数）。

输出：

```
array = np.arange(20).reshape(4,5)
array
```

使用`ones`函数创建一个填充了 1 的数组。

输出：

```
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19]])
```

`empty`函数创建一个数组。它的初始内容是随机的，取决于内存的状态。

输出：

```
(4, 5)
```

`full`函数创建一个填充给定值的 n * n 数组。

输出：

`eye`函数可以创建一个 n * n 矩阵，对角线为 1s，其他为 0。

输出：

```
array[3][4]
```

函数`linspace`在指定的时间间隔内返回均匀间隔的数字。 例如，下面的函数返回 0 到 10 之间的四个等间距数字。

输出：

```
array = np.arange(27).reshape(3,3,3)
array
```

## [#](#从python列表转换) 从 Python 列表转换

除了使用 Numpy 函数之外，你还可以直接从 Python 列表创建数组。将 Python 列表传递给数组函数以创建 Numpy 数组：

```
array([[[ 0,  1,  2],
        [ 3,  4,  5],
        [ 6,  7,  8]],

       [[ 9, 10, 11],
        [12, 13, 14],
        [15, 16, 17]],

       [[18, 19, 20],
        [21, 22, 23],
        [24, 25, 26]]])
```

输出：

你还可以创建 Python 列表并传递其变量名以创建 Numpy 数组。

输出：

```
array.shape
```

输出：

你可以确认变量`array`和`list`分别是 Python 列表和 Numpy 数组。

list

Numpy.ndarray

要创建二维数组，请将一系列列表传递给数组函数。

```
(3, 3, 3)
```

输出：

```
np.arange(10, 35, 3)
```

输出：

## [#](#使用特殊的库函数) 使用特殊的库函数

你还可以使用特殊库函数来创建数组。例如，要创建一个填充 0 到 1 之间随机值的数组，请使用`random`函数。这对于需要随机状态才能开始的问题特别有用。

输出：

```
array([10, 13, 16, 19, 22, 25, 28, 31, 34])
```

## [#](#总结) 总结

创建和填充 Numpy 数组是使用 Numpy 执行快速数值数组计算的第一步。使用不同的方式创建数组，你现在可以很好地执行基本的数组操作。


# NumPy 中的矩阵和向量


numpy 的`ndarray`类用于表示矩阵和向量。 要在 numpy 中构造矩阵，我们在列表中列出矩阵的行， 并将该列表传递给 numpy 数组构造函数。

例如，构造与矩阵对应的 numpy 数组

![](1681625990415.png)

我们会这样做

```
A = np.array([[1,-1,2],[3,2,0]])
```

向量只是具有单列的数组。 例如，构建向量

![](1681625990499.png)

我们会这样做

```
v = np.array([[2],[1],[3]])
```

更方便的方法是转置相应的行向量。 例如，为了使上面的矢量，我们可以改为转置行向量

![](1681625990585.png)

这个代码是

```
v = np.transpose(np.array([[2,1,3]]))
```

numpy 重载数组索引和切片符号以访问矩阵的各个部分。 例如，要打印矩阵 A 中的右下方条目，我们会这样做

要切出 A 矩阵中的第二列，我们会这样做

第一个切片选择 A 中的所有行，而第二个切片仅选择每行中的中间条目。

要进行矩阵乘法或矩阵向量乘法，我们使用 np.dot() 方法。

## [#](#用numpy求解方程组) 用 numpy 求解方程组

线性代数中比较常见的问题之一是求解矩阵向量方程。 这是一个例子。 我们寻找解决方程的向量 x

_A_ **x** = **b**

当

![](1681625990669.png)

![](1681625990753.png)

我们首先构建 A 和 b 的数组。

```
print(A[1,2])
```

为了解决这个系统

## [#](#应用-多元线性回归) 应用：多元线性回归

在多元回归问题中，我们寻找一种能够将输入数据点映射到结果值的函数。 每个数据点是_特征向量（x1，x2，...，xm）_，由两个或多个捕获输入的各种特征的数据值组成。为了表示所有输入数据以及输出值的向量，我们设置了输入矩阵 X 和输出向量 **y**：

![](1681625990838.png)

![](1681625990923.png)

在简单的最小二乘线性回归模型中，我们寻找向量**β**，使得乘积 Xβ最接近结果向量 **y**。

一旦我们构建了**β**向量，我们就可以使用它将输入数据映射到预测结果。 给定表单中的输入向量

![](1681625991007.png)

我们可以计算预测结果值

![](1681625991093.png)

计算β向量的公式是

**β** = (_X__T_ _X_)-1 _X__T_ **y**

在我们的下一个示例程序中，我将使用 numpy 构造适当的矩阵和向量并求解**β**向量。一旦我们解决了**β**，我们将使用它来预测我们最初从输入数据集中遗漏的一些测试数据点。

假设我们在 numpy 中构造了输入矩阵 X 和结果向量 **y**，下面的代码将计算**β**向量：

```
col = A[:,1:2]
```

最后一行使用`np.linalg.solve`计算**β**，因为等式是：

**β** = (_X__T_ _X_)-1 _X__T_ **y**

在数学上等价于方程组：

(_X__T_ _X_) **β** = _X__T_ **y**

我将用于此示例的数据集是 Windsor 房价数据集，其中包含有关安大略省温莎市区房屋销售的信息。 输入变量涵盖了可能对房价产生影响的一系列因素，例如批量大小，卧室数量以及各种设施的存在。[此处 open in new window](http://www2.lawrence.edu/fast/GREGGJ/Python/numpy/Housing.csv) 提供具有完整数据集的 CSV 文件。我从[这个网站 open in new window](https://vincentarelbundock.github.io/Rdatasets/datasets.html) 下载了数据集，该网站提供了大量涵盖大量主题的数据集。

这里现在是示例程序的源代码。

```
w = np.dot(A,v)
```

原始数据集包含 500 多个条目 为了测试线性回归模型所做预测的准确性，我们使用除最后 10 个数据条目之外的所有数据条目来构建回归模型并计算**β**。一旦我们构建了**β**向量，我们就用它来预测最后 10 个输入值，然后将预测的房价与数据集中的实际房价进行比较。

以下是该计划产生的产出：

```
A = np.array([[2,1,-2],[3,0,1],[1,1,-1]])
b = np.transpose(np.array([[-3,5,-2]]))
```

总体而言，预测并不是非常好，但是一些预测有点接近正确。从这些数据中做出更好的预测将成为机器学习冬季学期教程的主题。

## [#](#文章出处) 文章出处

由 NumPy 中文文档翻译，原作者为 [劳伦斯大学 open in new window](http://www.lawrence.edu/)，翻译至：[http://www2.lawrence.edu/fast/GREGGJ/Python/numpy/numpyLA.htmlopen in new window](http://www2.lawrence.edu/fast/GREGGJ/Python/numpy/numpyLA.html)。