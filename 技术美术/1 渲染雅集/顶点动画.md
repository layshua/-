# 平移旋转缩放
## 平移
在顶点着色器中修改顶点位置的 xyz 值即可
## 缩放
为了防止朝负方向缩放，+1.0 作为基础值，使原点永远乘以正值
```less
void Scale(inout float3 vertex)  
{  
    vertex.xyz *= 1.0 + _ScaleRange * sin(frac(_Time.z * _ScaleSpeed) * UNITY_TWO_PI);  
}
```
## 旋转
```less
// 旋转方法  
void Rotate(inout float3 vertex)  
{  
    //计算旋转角度  
    float angleY = _RotateRange * sin(frac(_Time.z * _RotateSpeed) * UNITY_TWO_PI);  
    //角度转为弧度  
    float radY = radians(angleY);  
  
    //sincos()方法节省性能，效果相同  
    //float sinY = sin(radY);  
    //float cosY = cos(radY);     
    sincos(radY, sinY, cosY);  
  
    // 这里就是应用旋转公式  
    vertex.xz = float2(  
        vertex.x * cosY - vertex.z * sinY,  
        vertex.x * sinY + vertex.z * cosY  
    );  
}
```

# 广告牌 Billboarding
广告牌总是面对着摄像机，

广告牌技术的**本质就是构建旋转矩阵**，而我们知道一个变换矩阵需要 3 个基向量。广告牌技术使用的基向量通常就是**表面法线 (normal)、指向上的方向 (up）以及指向右的方向（right)** 除此之外，我们**还需要指定一个锚点（anchor location)，这个锚点在旋转过程中是固定不变的, 以此来确定多边形在空间中的位置。**

构建 3 个相互正交的基向量。计算过程通常是，**通过初始计算得到目标的表面法线（例如就是视角方向）和指向上的方向**。两者不垂直但其中之一是固定的：
 - 当模拟草丛时，我们希望广告牌的指向上的方向永远是 (0,1,0)，而法线方向应该随视角变化; 
 - 当模拟粒子效果时，我们希望广告牌的法线方向是固定内，即总是指向视角方向，指向上的方向则可以发生变化。

这里我们**假设法线方向是固定的 (法线总是指向视角方向)
1. **根据初始的表面法线和指向上的方向 $(0,1,0)$ 来 计算出目标方向的指向右的方向 (通过叉积操作)**: $right = cross(up,normal)$
2. 归一化右向量，由法线和右向量叉积得出正交的向上方向 $up'=cross(normal,right)$
![[Pasted image 20230630150252.png]]
