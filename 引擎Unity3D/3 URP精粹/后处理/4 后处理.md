
---
title: 4 后处理
aliases: []
tags: []
create_time: 2023-07-02 14:09
uid: 202307021409
banner: "![[Pasted image 20230702141013.png]]"
---

URP 包括后处理效果的集成实现。如果使用 URP，则无需安装用于后期处理效果的额外软件包。URP 与 [Post Processing Stack v2](https://docs.unity3d.com/Packages/com.unity.postprocessing@latest/index.html) 包不兼容。
URP 使用 [Volume](https://docs.unity3d.com/Packages/com.unity.render-pipelines.universal@14.0/manual/Volumes.html)框架进行后期处理效果。

[Effect List | Universal RP | 14.0.8 --- 效果列表|通用RP | 14.0.8 (unity3d.com)](https://docs.unity3d.com/Packages/com.unity.render-pipelines.universal@14.0/manual/EffectList.html)

# 配置
1. Main Camera->Rendering->勾选 Post processing
2. 右键 > 创建 Volume->创建Profile 
3. 通过 Add Override 添加后处理效果
 ![[Pasted image 20230702141356.png|450]]
- **Mode**
    - Global：影响所有 camera
    - Local：影响碰撞器边界内的 camera  ![[Pasted image 20230702143135.png|450]]
- **Weight：** 对场景的影响程度。URP 将此乘数应用于它使用“摄影机位置”和“混合距离”计算的值。
- Priority：URP 使用此值来确定在多个 Volumes 对 Scene 具有同等影响时使用的 Volumes。URP 首先使用优先级较高的卷。
- Profile：配置文件，通过 Add Overide 添加的后处理配置都保存在这 

在运行时，URP 会遍历场景中连接到活动游戏对象的所有已启用的 Volumes 组件，并确定每个 Volumes 对最终场景设置的贡献。URP 使用“摄影机位置”和 Volumes 组件属性来计算贡献。URP 对所有 Volumes 中具有非零贡献的值进行**插值**，以计算最终特性值。  

---

**移动设备注意：**
后期处理效果可能会占用大量 frame time。如果你在移动设备上使用 URP，默认情况下，这些效果是最“mobile-frendly”的：
- Bloom（禁用**High Quality Filtering**）
- Chromatic Aberration 色差（翻译：多彩的像差）
- Color Grading 颜色分级
- Lens Distortion 透镜畸变
- Vignette 暗角
- depth-of field 景深，对低端设备使用高斯 Gaussian 景深。对于控制台和桌面平台，使用 Bokeh 景深。
- anti-aliasing 抗锯齿，对于移动平台 Unity 使用 FXAA。

---

**HDR 输出（我的显示器不支持）：**
   [High Dynamic Range (HDR) Output | Universal RP | 14.0.8 --- 高动态范围（HDR）输出](https://docs.unity3d.com/Packages/com.unity.render-pipelines.universal@14.0/manual/post-processing/hdr-output.html)
高动态范围内容比标准清晰度内容具有更宽的色域和更大的亮度范围。URP 可以为支持该功能的显示器输出 HDR 内容。

激活 HDR 步骤：
1. URP Asset->Quality->HDR
2.  Edit > Project Settings > Player >Other Settings ->Allow HDR Display Output (默认关闭)

# 自定义后处理
URP 允许使用 FullScreenPass RF 创建自定义后处理效果
必须创建 Fullscreen Shader Graph 才能创建自定义后处理效果。

1. Create -> Shader Graph -> URP -> Fullscreen Shader Graph
2. 添加 **URP Sample Buffer** 节点
3. **Source Buffer** 选择 **BlitSource**
   ![[Pasted image 20230702145615.png|329]]
4. 自定义一些后处理算法后，保存并创建 **Material** 
5. 然后将创建的材质添加到 FullPassScreen RF 中的 **Pass Material** 即可
   
   